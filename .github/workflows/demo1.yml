name: My first workflow
on: push

jobs:
  lint:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      - name: Set up Python
        uses: actions/setup-python@v6
        with:
          python-version: '3.13'
      - name: Install lint tools
        run: |
          pip install ruff black
      - name: Run ruff (lint)
        run: ruff check .
      - name: Run Black (format check)
        id: blackcheck
        run: black --check .
      - name: Show Black diff
        if: failure() && steps.blackcheck.outcome == 'failure'
        run: black --diff --color .
      - name: Apply Black Fixes
        if: failure() && steps.blackcheck.outcome == 'failure'
        run: black .

  test:
    runs-on: ubuntu-latest
    needs: lint
    steps:
      - name: testing
        run: echo "testing"

  build:
    runs-on: ubuntu-latest
    needs: test
    steps:
      - name: building
        run: echo "building"

  deploy:
    runs-on: ubuntu-latest
    needs: build
    steps:
      - name: deploying
        run: echo "deploying"